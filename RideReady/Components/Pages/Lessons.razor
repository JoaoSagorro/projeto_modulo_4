@page "/lessons"
@rendermode InteractiveServer
@inject DialogService DialogService
@inject ILessonService lessonService
@using Microsoft.AspNetCore.Authorization
@using Microsoft.EntityFrameworkCore
@using Microsoft.IdentityModel.Tokens
@using RepositoryLibrary.IServices
@using RepositoryLibrary.Models
@attribute [Authorize]


<div class="border border-1">
    <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Start" AlignItems="AlignItems.Center" Gap="0.5rem" class="rz-p-12">
        <RadzenLabel Text="Select Date" Component="RadzenDatePickerBindValue" />
        <RadzenDatePicker @bind-Value=@value Name="RadzenDatePickerBindValue" ShowCalendarWeek />
    </RadzenStack>


    <div class="">
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem" class="rz-p-4 rz-mb-6 rz-border-radius-1" Style="border: var(--rz-grid-cell-border);">
            <RadzenLabel Text="Variant:" />
            <RadzenSelectBar @bind-Value="@variant" TextProperty="Text" ValueProperty="Value" Data="@(Enum.GetValues(typeof(Variant)).Cast<Variant>().Select(t => new { Text = $"{t}", Value = t }))" Size="ButtonSize.Small" class="rz-display-none rz-display-xl-flex" />
            <RadzenDropDown @bind-Value="@variant" TextProperty="Text" ValueProperty="Value" Data="@(Enum.GetValues(typeof(Variant)).Cast<Variant>().Select(t => new { Text = $"{t}", Value = t }))" class="rz-display-inline-flex rz-display-xl-none" />
        </RadzenStack>

        <RadzenCard Variant="@variant" class="rz-my-12 rz-mx-auto" Style="max-width: 420px">
            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Start" Gap="1rem" class="rz-p-4">
                <RadzenImage Path="" Style="width: 100px; height: 100px; border-radius: 50%;" />
                <RadzenStack Gap="0">
                    <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Employee</RadzenText>
                    <RadzenText TextStyle="TextStyle.Body1"><b>Pedro</b></RadzenText>
                    <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-4 rz-mb-0">Company</RadzenText>
                    <RadzenText TextStyle="TextStyle.Body1"><b>Pestana</b></RadzenText>
                </RadzenStack>
            </RadzenStack>
        </RadzenCard>
    </div>
</div>
@if(!lessons.IsNullOrEmpty()){
foreach(var lesson in lessons)
{
    <LessonComponent lesson="lesson" />
}
}



@code {
    DateOnly? value = DateOnly.FromDateTime(DateTime.Now);
}

@code {
    // Order order;
    IEnumerable<Lesson> lessons {get; set;}

    Variant variant = Variant.Filled;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        lessons = await lessonService.GetAllLessonsAsync();

        // order = dbContext.Orders.Include("Customer").Include("Employee").FirstOrDefault();
    }
}
    